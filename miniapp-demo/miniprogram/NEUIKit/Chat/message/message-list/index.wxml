<view class="msg-list-wrapper" bindtap="handleTapMessageList">
  <scroll-view 
    id="message-scroll-list"
    class="message-scroll-list"
    scroll-y="{{true}}"
    scroll-top="{{scrollTop}}"
    bindscrolltolower="onLoadMore"
    enhanced="{{true}}"
    show-scrollbar="{{false}}"
    scroll-with-animation="{{true}}"
  >
    <!-- 加载更多提示 -->
    <view wx:if="{{!noMore && !loadingMore}}" class="view-more-text" bindtap="onLoadMore">
      查看更多消息
    </view>
    
    <!-- 加载中提示 -->
    <view wx:if="{{loadingMore}}" class="loading-text">
      加载中...
    </view>
    
    <!-- 没有更多消息提示 -->
    <view wx:if="{{noMore}}" class="msg-tip">
      没有更多消息了
    </view>
    
    <!-- 消息列表 -->
    <view wx:for="{{finalMsgs}}" wx:key="messageClientId" wx:for-item="item" wx:for-index="index">
      <message-item 
        class="message-item"
        msg="{{item}}"
        teamId="{{teamId}}"
        replyMsgsMap="{{replyMsgsMap}}"
        bind:reeditMsg="handleReeditMsg"
        bind:imageClick="handleImageClick"
        bind:fileClick="handleFileClick"
        bind:deleteMsg="handleDeleteMsg"
        bind:replyMsg="handleReplyMsg"
        bind:forwardMsg="handleForwardMsg"
        bind:avatarClick="handleAvatarClick"
      />
    </view>
    
    <!-- 空状态 -->
    <view wx:if="{{finalMsgs.length === 0 && !loadingMore}}" class="empty-state">
      <view class="empty-icon">💬</view>
      <view class="empty-text">暂无消息</view>
    </view>
  </scroll-view>
</view>