<view class="team-setting-container {{theme === 'dark' ? 'dark-theme' : ''}}">
  <!-- 状态栏 -->
  <view class="status-bar-placeholder" style="height: {{statusBarHeight}}px;"></view>
  
  <!-- 导航栏 -->
  <view class="team-setting-header">
    <view class="header-left" bindtap="handleBack">
      <icon type="icon-zuojiantou" size="20" color="{{theme === 'dark' ? '#ffffff' : '#333333'}}" />
    </view>
    <view class="header-title">群聊设置</view>
    <view class="header-right"></view>
  </view>
  
  <!-- 内容区域 -->
  <view class="team-setting-content" wx:if="{{team}}">
    <!-- 群信息卡片 -->
    <view class="team-setting-card">
      <!-- 群基本信息 -->
      <view class="team-info-item" bindtap="handleInfoClick">
        <view class="team-info-section">
          <view class="team-avatar">
            <image wx:if="{{team.avatar}}" src="{{team.avatar}}" class="avatar-image" mode="aspectFill" />
            <view wx:else class="avatar-placeholder" style="background-color: {{avatarColor}}">
              <text class="avatar-text">{{displayName}}</text>
            </view>
          </view>
          <view class="team-info-content">
            <view class="team-info-title">{{team.name || '群聊'}}</view>
            <view class="team-info-subtitle">点击查看群信息</view>
          </view>
        </view>
        <view class="setting-arrow">
          <icon type="icon-jiantou" size="16" color="#999999" />
        </view>
      </view>
      
      <!-- 群成员信息 -->
      <view class="team-members-wrap">
        <view class="team-members-info" bindtap="handleViewTeamMembers">
          <view class="team-info-title">群成员</view>
          <view class="setting-arrow">
            <view class="team-info-count">{{team.memberCount || 0}}</view>
            <icon type="icon-jiantou" size="16" color="#999999" />
          </view>
        </view>
        
        <!-- 成员列表 -->
        <view class="member-list">
          <!-- 成员头像列表 -->
          <view class="member-avatars">
            <view class="member-item" wx:for="{{teamMembers}}" wx:key="index">
              <avatar 
                class="member-avatar" 
                account="{{item.accountId}}" 
                avatar="{{item.avatar}}" 
                size="40"
                fontSize="10"
              />
            </view>
            <!-- 添加成员按钮 -->
            <view class="member-add" wx:if="{{canAddMember}}" bindtap="handleAddTeamMember">
              <view class="add-icon">+</view>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- 聊天设置卡片 -->
    <view class="team-setting-card">
      <view class="team-setting-item">
        <view class="setting-label">置顶聊天</view>
        <switch 
          checked="{{!!conversation.stickTop}}" 
          bindchange="handleStickTopChange"
          color="#007AFF"
        />
      </view>
      <view class="team-setting-item">
        <view class="setting-label">开启消息提醒</view>
        <switch 
          checked="{{!isMute}}" 
          bindchange="handleNotificationChange"
          color="#007AFF"
        />
      </view>
      <view class="team-setting-item" bindtap="handleEditMyNickname">
        <view class="setting-label">我在群里的昵称</view>
        <view class="setting-right">
          <view class="setting-value">{{myNickname || '未设置'}}</view>
          <view class="setting-arrow">
            <icon type="icon-jiantou" size="16" color="#999999" />
          </view>
        </view>
      </view>
    </view>

    <!-- 群管理卡片 (仅群主/管理员可见) -->
    <view class="team-setting-card" wx:if="{{canManageTeam}}">
      <view class="team-setting-item">
        <view class="setting-label">群禁言</view>
        <switch 
          checked="{{isTeamBanned}}" 
          bindchange="handleTeamMuteAllChange"
          color="#007AFF"
        />
      </view>
    </view>

    <!-- 危险操作按钮 -->
    <view class="danger-btn" wx:if="{{showDismissButton}}" bindtap="handleDismissTeam">
      解散群聊
    </view>
    <view class="danger-btn" wx:if="{{showLeaveButton}}" bindtap="handleLeaveTeam">
      退出群聊
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <view class="loading-text">{{loadingText}}</view>
    </view>
  </view>

  <!-- 确认对话框 -->
  <view class="modal-overlay" wx:if="{{showConfirmModal}}" bindtap="handleModalCancel">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-title">{{confirmTitle}}</view>
      <view class="modal-message">{{confirmMessage}}</view>
      <view class="modal-actions">
        <view class="modal-button cancel-button" bindtap="handleModalCancel">
          取消
        </view>
        <view class="modal-button confirm-button" bindtap="handleModalConfirm">
          确定
        </view>
      </view>
    </view>
  </view>
</view>